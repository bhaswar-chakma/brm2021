df_s2 %>%
mutate(assignment1 = as.numeric(assignment1))
bind_rows(df_s1, df_s2)
bind_rows(df_s1, df_s2) %>%
rowwise() %>%
mutate(avg_grade = mean(c(assignment1, assignment2), na.rm = TRUE))
v_grades <- c(TRUE, FALSE, TRUE, TRUE) # pass = TRUE; fail = FALSE
sum(v_grades)
df <-  gapminder %>%
filter(year == 2007) %>%
mutate(pop_m = pop/1e6)
library(dplyr)
library(ggplot2)
# data
df <-  gapminder %>%
filter(year == 2007) %>%
mutate(pop_m = pop/1e6)
library(gapminder)
# data
df <-  gapminder %>%
filter(year == 2007) %>%
mutate(pop_m = pop/1e6)
# fig1
ggplot(df, aes(x = gdpPercap, y = lifeExp)) +
geom_point()
# fig2
ggplot(df, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point()
# fig3
ggplot(df, aes(x = gdpPercap, y = lifeExp, shape = continent)) +
geom_point()
# fig4
ggplot(df, aes(x = gdpPercap, y = lifeExp, size = pop_m, color = continent)) +
geom_point()
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(tidyverse)
library(gapminder)
knitr::include_graphics("images/rmd-new.png")
library(readxl)
w8_students <- read_excel("data/w8-students.xlsx")
dput(w8_students)
knitr::opts_chunk$set(echo = TRUE)
readr::read_csv(https://www.dropbox.com/s/2xbw1m9favzo1lc/w8-students.csv?dl=1)
library(readr)
df_students <- read_csv("https://www.dropbox.com/s/2xbw1m9favzo1lc/w8-students.csv?dl=1")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(readr)
df_students <- read_csv("https://www.dropbox.com/s/2xbw1m9favzo1lc/w8-students.csv?dl=1")
DT:datatable(df_students)
DT::datatable(df_students)
ggplot(df_students, aes(x = name, y = grade)) +
geom_bar()
library(tidyverse)
df_students <- readr::read_csv("https://www.dropbox.com/s/2xbw1m9favzo1lc/w8-students.csv?dl=1")
ggplot(df_students, aes(x = name, y = grade)) +
geom_bar()
ggplot(df_students, aes(x = name, y = grade)) +
geom_col()
ggplot(df_students, aes(x = name, y = reorder(grade))) +
geom_col()
ggplot(df_students, aes(x = name, y = reorder(-grade))) +
geom_col()
ggplot(df_students, aes(x = name, y = grade)) +
geom_col()
ggplot(df_students, aes(x = reorder(name, -grade), y = grade)) +
geom_col()
ggplot(df_students, aes(x = reorder(name, grade), y = grade)) +
geom_col()
ggplot(df_students, aes(x = reorder(name, -grade), y = grade)) +
geom_col() +
facet_wrap(~ section)
ggplot(df_students)
ggplot(df_students, aes(x = name, y = grade, fill = section)) +
geom_col()
ggplot(df_students, aes(x = name, y = grade, fill = section)) +
geom_col() +
coord_flip()
ggplot(df_students, aes(x = reorder(name, - grade), y = grade, fill = section)) +
geom_col() +
coord_flip()
ggplot(df_students, aes(x = reorder(name, grade), y = grade, fill = section)) +
geom_col() +
coord_flip()
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
df_healthcare %>%
rename(industry = 3,
revenue = 4,
operating_expense = 5,
mcap = 6,
rnd = 7,
region = 8) %>%
mutate(across(revenue:rnd, as.numeric)) %>%
filter(region != "NULL") %>%
ggplot(aes(x = operating_expense/1e9, y = revenue/1e9,
size = mcap/1e9, shape= region, color = industry)) +
geom_point()
library(tidyverse)
df_students <- readr::read_csv("https://www.dropbox.com/s/2xbw1m9favzo1lc/w8-students.csv?dl=1")
df_healthcare %>%
rename(industry = 3,
revenue = 4,
operating_expense = 5,
mcap = 6,
rnd = 7,
region = 8) %>%
mutate(across(revenue:rnd, as.numeric)) %>%
filter(region != "NULL") %>%
ggplot(aes(x = operating_expense/1e9, y = revenue/1e9,
size = mcap/1e9, shape= region, color = industry)) +
geom_point()
df_healthcare <- readxl::read_excel("data/w8-refinitive.xlsx",
sheet = "healthcare")
head(df_healthcare)
df_healthcare %>%
rename(industry = 3,
revenue = 4,
operating_expense = 5,
mcap = 6,
rnd = 7,
region = 8) %>%
mutate(across(revenue:rnd, as.numeric)) %>%
filter(region != "NULL") %>%
ggplot(aes(x = operating_expense/1e9, y = revenue/1e9,
size = mcap/1e9, shape= region, color = industry)) +
geom_point()
df_healthcare %>%
rename(industry = 3,
revenue = 4,
operating_expense = 5,
mcap = 6,
rnd = 7,
region = 8) %>%
mutate(across(revenue:rnd, as.numeric)) %>%
filter(region != "NULL") %>%
ggplot(aes(x = operating_expense/1e9, y = revenue/1e9,
size = mcap/1e9, shape= region, color = industry)) +
geom_point()
df_healthcare %>%
rename(industry = 3,
revenue = 4,
operating_expense = 5,
mcap = 6,
rnd = 7,
region = 8) %>%
mutate(across(revenue:rnd, as.numeric)) %>%
filter(region != "NULL") %>%
ggplot(aes(x = operating_expense/1e9, y = revenue/1e9,
size = mcap/1e9, shape= region, color = industry)) +
geom_point()
df_healthcare %>%
rename(industry = 3,
revenue = 4,
operating_expense = 5,
mcap = 6,
rnd = 7,
region = 8) %>%
mutate(across(revenue:rnd, as.numeric)) %>%
filter(region != "NULL") %>%
ggplot(aes(x = operating_expense/1e9, y = revenue/1e9,
size = mcap/1e9, shape= region, color = industry)) +
geom_point()
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
knitr::include_graphics("images/tidyr-logo.png")
knitr::include_graphics("images/tidyr-logo.png")
knitr::include_graphics("images/tidy-data.png")
library(tidyverse)
df1 <- readr::read_excel("https://www.dropbox.com/s/z3qi3jximacenpl/w9-tidy-untidy.xlsx?dl=1, sheet = df1")
library(tidyverse)
df1 <- readxl::read_excel("https://www.dropbox.com/s/z3qi3jximacenpl/w9-tidy-untidy.xlsx?dl=1, sheet = df1")
df1 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df1")
library(tidyverse)
library(readxl)
df1 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df1")
df1 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df1")
df2 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df2")
df3 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df3")
df4 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df4")
df5 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df5")
df6 <- read_excel("data/w9-tidy-untidy.xlsx", sheet = "df6")
DT:dt(df1)
DT::dt(df1)
DT::datatable(df1)
DT::datatable(df2)
df %>%
pivot_longer(cols = c("Bangladesh", "Portugal"),
names_to = country,
values_to = gdp_current_usd)
df %>%
pivot_longer(cols = c("Bangladesh", "Portugal"),
names_to = "country",
values_to = "gdp_current_usd")
df2 %>%
pivot_longer(cols = c("Bangladesh", "Portugal"),
names_to = "country",
values_to = "gdp_current_usd")
df2 %>%
pivot_longer(cols = c("Bangladesh", "Portugal"),
names_to = country,
values_to = "gdp_current_usd")
df2 %>%
pivot_longer(cols = 2:3,
names_to = "country",
values_to = "gdp_current_usd")
DT::datatable(df3)
df3 %>%
pivot_longer(cols = `2005`:`2019`,
names_to = "year",
values_to = "gdp_current_usd")
df3 %>%
pivot_longer(cols = `2015`:`2019`,
names_to = "year",
values_to = "gdp_current_usd")
df3 %>%
pivot_longer(cols = "2015":"2019",
names_to = "year",
values_to = "gdp_current_usd")
DT::datatable(df4)
DT::datatable(df4)
df4 %>%
pivot_wider(names_from = "type",
values_from = "totals")
DT::datatable(df5)
df5 %>%
separate(iso2_country, into = c("iso2", "country"), sep = "-")
df5 %>%
separate(iso2_country, into = c("iso2", "country"))
df5 %>%
separate(year, into = c(NA, "year"), sep = 2)
df5 %>%
separate(year, into = c(NA, "year"), sep = 2,iso2_country, into = c("iso2", "country"), sep = "-")
df5 %>%
separate(year, into = c(NA, "year"), sep = 2)
df5 %>%
separate(year, into = c(NA, "year"), sep = 2)
DT::datatable(df6)
DT::datatable(df6)
df6 %>%
unite(year, century, year_num )
df6 %>%
unite(year, century, year_num, sep = "") # by default _
df_am
df_am <- read_excel("data/w9-datastream.xlsx",
sheet = "AAPL-MSFT")
df_am
df_am %>%
pivot_wider(cols = 2:3,
names_to = "v1",
values_to = "revenue")
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue")
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA))
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue")
df_am
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA))
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = name)
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = "name")
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name)
DT:datatable(df_am)
DT::datatable(df_am)
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name)
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e9)
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6)
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6) %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col()
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6) %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge")
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6) %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue(in billion USD)",
fill = "")
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6) %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue(in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020)
df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6) %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue (in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020) +
theme(axis.text.x = element_text(angle = 45))
df_ta <- read_excel("data/w9-datastream.xlsx",
sheet = "TSLA-AMZN")
DT::datatable(df_ta)
df_e1 <- df_am %>%
pivot_longer(cols = 2:3,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("firm", NA)) %>%
rename(year = Name) %>%
mutate(revenue = revenue/1e6)
df_e1 %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue (in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020) +
theme(axis.text.x = element_text(angle = 45))
DT::datatable(df_ta)
df_e1 <- df_am %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("year", NA))
df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "v1",
values_to = "revenue") %>%
separate(v1, into = c("year", NA)) %>%
rename(year = Name)
df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "v1",
values_to = "revenue")
df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA))
df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6)
df_e2 <- df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6)
df_e2 %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue (in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020) +
theme(axis.text.x = element_text(angle = 45))
df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6)
df_e2 <- df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6,
year = as.numeric())
df_e2 <- df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6,
year = as.numeric(year))
df_e2 %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue (in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020) +
theme(axis.text.x = element_text(angle = 45))
df_e2 <- df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6,
year = as.numeric(year))
df_e2 %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
labs(x = "Year",
y = "Revenue (in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020) +
theme(axis.text.x = element_text(angle = 45))
bind_rows(df_e1, df_e2)
bind_rows(df_e1, df_e2) %>%
ggplot(aes(x = year, y = revenue, color = firm)) +
geom_line()
bind_rows(df_e1, df_e2) %>%
ggplot(aes(x = year, y = revenue, color = firm)) +
geom_line() +
scale_x_continuous(breaks = 2010:2020)
bind_rows(df_e1, df_e2) %>%
ggplot(aes(x = year, y = revenue, color = firm)) +
geom_line(size = 1) +
scale_x_continuous(breaks = 2010:2020)
df_e2 <- df_ta %>%
pivot_longer(cols = `2010`:`2020`,
names_to = "year",
values_to = "revenue") %>%
separate(Name, into = c("firm", NA)) %>%
mutate(revenue = revenue/1e6,
year = as.numeric(year))
df_e2 %>%
ggplot(aes(x = year, y = revenue, fill = firm)) +
geom_col(position = "dodge") +
scale_x_continuous(breaks = 2010:2020) +
theme(axis.text.x = element_text(angle = 45))
bind_rows(df_e1, df_e2) %>%
ggplot(aes(x = year, y = revenue, color = firm)) +
geom_line(size = 1) +
labs(x = "Year",
y = "Revenues (in billion USD)",
fill = "") +
scale_x_continuous(breaks = 2010:2020)
bind_rows(df_e1, df_e2) %>%
ggplot(aes(x = year, y = revenue, color = firm)) +
geom_line(size = 1) +
labs(x = "Year",
y = "Revenues (in billion USD)",
color = "") +
scale_x_continuous(breaks = 2010:2020)
knitr::include_graphics("images/clean-dirty.png")
knitr::include_graphics("images/clean-dirty.jpg")
