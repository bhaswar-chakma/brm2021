select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4)
df_ec_clean
library(readxl)
library(tidyverse)
df_ec <- read_excel("data/w10-datastream.xlsx",
sheet = "employee-cash", skip = 3)
df_ec_clean <- df_ec %>%
select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4)
mutate(year = as.integer(year))
df_ec <- read_excel("data/w10-datastream.xlsx",
sheet = "employee-cash", skip = 3)
df_ec_clean <- df_ec %>%
select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4)
df_ec %>%
select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4)
df_ec <- read_excel("data/w10-datastream.xlsx",
sheet = "employee-cash", skip = 3)
df_ec %>%
select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4)
df_ec_clean <- df_ec %>%
select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4) %>%
mutate(year = as.integer(year))
df_ec_clean
df_ec <- read_excel("data/w10-datastream.xlsx",
sheet = "employee-cash", skip = 3)
df_ec_clean <- df_ec %>%
select(-2, -3) %>%
pivot_longer(cols = -1,
names_to = "year",
values_to = "numbers") %>%
separate(Name, into = c("cname", "type"), sep = "-") %>%
pivot_wider(names_from = type,
values_from = numbers) %>%
rename(employees = 3,
cash = 4) %>%
mutate(year = as.integer(year))
df_ec_clean
DT::datatable(df_ec_clean)
DT::datatable(df_rnd_clean)
# employees
df_ec_clean %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
# employees
df_ec_clean %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge") +
coord_flip()
# employees
df_ec_clean %>%
filter(year == 2020) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
# employees
df_ec_clean %>%
filter(year == 2020) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge") +
scale_x_continuous(breaks = 2020)
# employees
df_ec_clean %>%
filter(year == 2020| year == 2019) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge") +
scale_x_continuous(breaks = 2020)
# employees
df_ec_clean %>%
filter(year == 2020| year == 2019) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
# employees
df_ec_clean %>%
filter(year == 2020| year == 2019) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge") +
scale_x_coninuous(breaks = c(2019, 2020))
# employees
df_ec_clean %>%
filter(year == 2020| year == 2019) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge") +
scale_x_coninuous(breaks = 2019:2020)
# employees
df_ec_clean %>%
filter(year == 2029| year == 2020) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge") +
scale_x_coninuous(breaks = 2019:2020)
# employees
df_ec_clean %>%
filter(year == 2029| year == 2020) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
# employees
df_ec_clean %>%
filter(year > 2018) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
# employees
df_ec_clean %>%
filter(year > 2015) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
# employees
df_ec_clean %>%
filter(year > 2014) %>%
ggplot(aes(x = year, y = employees/1000, fill  = cname)) +
geom_col(position = "dodge")
mtcars
library(gapminder)
library(gapminder)
head(gapminder)
library(gapminder)
table(gapminder$country)
names(gapminder)
names(gapminder)
table(gapminder$continent)
gapminder %>%
filter(continent == "Europe")
filter(gapminder, continent == "Europe"))
filter(gapminder, continent == "Europe")
filter(gapminder, continent == "Europe") %>%
distinct(country)
gapminder %>%
filter(country == "France" | country == "Japan" | country == "Australia")
gapminder %>%
filter(country %in% c("France", "Japan", "Australia"))
gapminder %>%
filter(country %in% c("France", "Japan", "Australia"))
gapminder %>%
filter(country == "France" | country == "Japan" | country == "Australia")
gapminder %>%
mutate(portugal = case_when(country == "Portugal" ~ 1,
country != "Portugal" ~ 0))
gapminder %>%
mutate(portugal = if_else(country == "Portugal", 1, 0))
gapminder %>%
mutate(country == "Portugal")
gapminder %>%
mutate(portugal = country == "Portugal")
gapminder %>%
mutate(portugal = as.integer(country == "Portugal")) # logical
test <- gapminder %>%
mutate(portugal = as.integer(country == "Portugal")) # logical
table(test$portugal)
test <- gapminder %>%
mutate(portugal = as.integer(country == "Portugal")) # logical
filter(test, portugal == 1)
gapminder %>%
mutate(portugal = as.integer(country == "Portugal")) # logical
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(readxl)
library(tidyverse)
df_rnd <- read_excel("data/w10-datastream.xlsx",
sheet = "research&dev", skip = 3)
df_rnd_clean <- df_rnd %>%
# drop unwanted variables
select(-2, -3) %>%
# reshape
pivot_longer(
cols = -1,
names_to = "year",
values_to = "rnd"
) %>%
# year as integer
mutate(year = as.integer(year)) %>%
# Extract names
separate(Name, into = c("cname", NA), sep = "-")
library(lubridate)
ymd("2021-12-01")
ymd("2021-12-01")
class(ymd("2021-12-01"))
ymd("2021-01-12")
class(ymd("2021-01-12"))
ydm("2021-01-12")
class(ymd("2021-01-12"))
dmy("01-12-2021")
class(ymd("01-12-2021"))
dmy("01-12-2021")
class(dmy("01-12-2021"))
dmy("01-12-2021")
class(dmy("01-12-2021"))
dmy("01-12-2021")
class(dmy("01-12-2021"))
dmy("01/12/2021")
class(dmy("01/12/2021"))
month(dmy("01-12-2021"))
month(dmy("01-12-2021")) # month() is applied to a date object
month(dmy("01-12-2021"), label = TRUE) # get month names
year(dmy("01-12-2021")) # year() is applied to a date object
day(dmy("01-12-2021")) # year() is applied to a date object
day(dmy("31-12-2021")) # year() is applied to a date object
day(dmy("01-12-2021")) # year() is applied to a date object
df <- read_excel("data/Have you met _Ted__(1-38).xlsx")
df_renamed <- df %>%
select(6:15) %>%
rename(name = 1,
id = 2,
gender = 3,
date_of_birth = 4,
struggling = 5,
reason_struggle = 6,
practice_r = 7,
social_media = 8,
country = 9,
himym = 10)
table(df_renamed$country)
df_renamed %>%
select(country)
df_renamed %>%
select(country) %>%
mutate(country2 = str_to_title(country))
df_renamed %>%
df_renamed %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7)
df <- read_excel("data/Have you met _Ted__(1-38).xlsx")
df_renamed <- df %>%
select(6:15) %>%
rename(name = 1,
id = 2,
gender = 3,
date_of_birth = 4,
struggling = 5,
reason_struggle = 6,
practice_r = 7,
social_media = 8,
country = 9,
himym = 10)
df_renamed %>%
df_renamed %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7)
df_renamed %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7)
df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7)
df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7) %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_point()
df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7) %>%
filter(social_media2 < 150) %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_point()
df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7) %>%
filter(social_media2 < 100) %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_point()
df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7) %>%
filter(social_media2 < 100) %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_boxplot()
df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7) %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_boxplot()
df_time <- df_renamed %>%
select(practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7)
df_time %>%
ggplot(aes(x = practice_r2, fill = gender)) +
geom_boxplot()
df_time %>%
ggplot(aes(y = practice_r2, fill = gender)) +
geom_boxplot()
df_time %>%
ggplot(aes(y = practice_r2, fill = gender)) +
geom_boxplot() +
geom_point()
df_time %>%
ggplot(aes(x = practice_r2, fill = gender)) +
geom_boxplot() +
geom_point()
df_time %>%
ggplot(aes(x = practice_r2, fill = gender)) +
geom_boxplot() +
geom_jitter()
df_time %>%
ggplot(aes(x = gender, fill = practice_r2)) +
geom_boxplot() +
geom_jitter()
df_time %>%
ggplot(aes(x = gender, fill = practice_r2)) +
geom_boxplot()
df_time %>%
ggplot(aes(x = gender, y = practice_r2)) +
geom_boxplot()
df_time %>%
ggplot(aes(x = gender, y = practice_r2, fill = gender)) +
geom_boxplot()
df_time %>%
ggplot(aes(x = gender, y = social_media2, fill = gender)) +
geom_boxplot()
df_time %>%
ggplot(aes(x = gender, y = practice_r2, fill = gender)) +
geom_boxplot()
df_time %>%
ggplot(aes(x = practice_r2, y = social_media2, fill = gender)) +
geom_point()
df_time %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_point()
df_time <- df_renamed %>%
select(name, practice_r, social_media, gender) %>%
mutate(practice_r2 = if_else(practice_r == "3h", 180, as.numeric(practice_r)),
social_media2 = if_else(social_media == "120min", 120, as.numeric(social_media)),
practice_r2 = practice_r2/7)
df_time %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_point()
df_time %>%
ggplot(aes(x = practice_r2, y = social_media2, color = gender)) +
geom_point()
df_time %>%
filter(practice_r2 > 20)
df_renamed %>%
select(name, date_of_birth)
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth))
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth)) %>%
arrange(date_of_birth)
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth)) %>%
ggplot(aes(x = month)) +
geom_col()
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth))
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth), label = TRUE) %>%
ggplot(aes(x = month)) +
geom_col()
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth), label = TRUE) %>%
ggplot(aes(x = month)) +
geom_col()
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth, label = TRUE)) %>%
ggplot(aes(x = month)) +
geom_col()
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth, label = TRUE)) %>%
ggplot(aes(x = month)) +
geom_col()
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth, label = TRUE)) %>%
ggplot(aes(x = month)) +
geom_bar()
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth),
month = month(date_of_birth, label = TRUE)) %>%
ggplot(aes(x = month)) +
geom_bar() +
labs(title = "Birthdays")
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth)) %>%
arrange(date_of_birth) %>%
slice(1, nrow())
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth)) %>%
arrange(date_of_birth) %>%
slice(1, nrow(df_renamed))
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth)) %>%
arrange(date_of_birth) %>%
drop_na() %>%
slice(1, nrow(df_renamed))
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth)) %>%
arrange(date_of_birth) %>%
drop_na() %>%
slice(1, nrow(df_renamed)-1)
df_renamed %>%
select(name, date_of_birth) %>%
mutate(date_of_birth = ymd(date_of_birth)) %>%
arrange(date_of_birth)
df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France"))
df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France",
country !%in% c("Brazil", "France") ~ country))
df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France",
country ! %in% c("Brazil", "France") ~ country))
df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France",
country != "Brazil" | country != "France" ~ country))
table(df_renamed$country)
table(testnew$country)
testnew < -df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France",
country != "Brazil" | country != "France" ~ country))
testnew <- df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France",
country != "Brazil" | country != "France" ~ country))
table(df_renamed$country)
table(testnew$country)
table(df_renamed$country)
table(df_renamed2$country)
df_renamed2 <- df_renamed %>%
mutate(country = case_when(country == "BRAZIL" ~ "Brazil",
country == "FRANCE" ~ "France",
country != "Brazil" | country != "France" ~ country))
table(df_renamed$country)
table(df_renamed2$country)
df_renamed %>%
mutate(international = if_else(country != "Portugal", 1, 0))
df_renamed %>%
mutate(country2 = str_to_title(country))
